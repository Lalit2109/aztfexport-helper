# Azure Subscriptions Configuration
# Configure your 35 subscriptions here

# Global exclusions (applied to all subscriptions)
# These resource groups are excluded from export across all subscriptions
# Wildcard patterns are supported (* and ?)
global_excludes:
  resource_groups:
    # Azure-managed/system resource groups (wildcard supported)
    - "Built-in-identity-rg"
    - "networkwatcherRG"
    - "NetworkWatcherRG_*"        # Network Watcher (all regions)
    - "AzureBackupRG_*"           # Azure Backup
    - "AzureSiteRecoveryRG_*"     # Azure Site Recovery
    - "MC_*"                      # AKS managed clusters
    - "azure-arc"                 # Azure Arc
    - "DefaultResourceGroup-*"    # Default resource groups
    # Add more patterns as needed
    # - "rg-system-*"
    # - "rg-azure-*"

subscriptions:
  - id: "subscription-id-1"
    name: "Production Subscription 1"
    environment: "prod"
    repo_name: "terraform-prod-sub-1"
    repo_url: "https://dev.azure.com/org/project/_git/terraform-prod-sub-1"
    export_enabled: true
    
  - id: "subscription-id-2"
    name: "Development Subscription 1"
    environment: "dev"
    repo_name: "terraform-dev-sub-1"
    repo_url: "https://dev.azure.com/org/project/_git/terraform-dev-sub-1"
    export_enabled: true
    
  # Add remaining 33 subscriptions here
  # Template:
  # - id: "subscription-id-X"
  #   name: "Subscription Name"
  #   environment: "prod|dev|staging"
  #   repo_name: "terraform-{environment}-sub-X"
  #   repo_url: "https://dev.azure.com/org/project/_git/terraform-{environment}-sub-X"
  #   export_enabled: true|false

# aztfexport configuration
aztfexport:
  # Resource types to export (empty = export all)
  # Example: ["Microsoft.Compute/virtualMachines", "Microsoft.Network/virtualNetworks"]
  resource_types: []
  
  # Resource groups to exclude from export (subscription-specific)
  # Supports exact match and wildcard patterns (* and ?)
  # These are in addition to global_excludes above
  # Example:
  # exclude_resource_groups:
  #   - "rg-exclude-this"        # Exact match
  #   - "rg-test-*"              # Wildcard pattern
  #   - "rg-temp-resources"
  exclude_resource_groups: []
  
  # Resources to exclude (by ID pattern)
  # Example: ["/subscriptions/xxx/resourceGroups/xxx/providers/Microsoft.xxx/xxx"]
  exclude_resources: []
  
  # Additional aztfexport flags
  # Example: ["--parallelism", "5"]
  additional_flags: []

# Azure DevOps configuration
azure_devops:
  organization: "your-org"
  project: "your-project"
  # Service connection name for Azure authentication
  service_connection: "Azure-ServiceConnection"

# Note: This tool uses Azure CLI (az) for all Azure operations
# Azure CLI handles SSL certificates automatically, so no SSL configuration needed
  
# Output configuration
output:
  # Base directory for exports (relative to workspace)
  base_dir: "./exports"
  
  # Whether to create resource group subfolders
  create_rg_folders: true
  
  # Whether to initialize git repos locally
  init_git_repos: false

# Git push configuration
git:
  # Enable pushing to repositories (set to true after verifying exports)
  # Default: false - exports only, no git push
  push_to_repos: false
  
  # Branch to push to (default: main)
  branch: "main"

